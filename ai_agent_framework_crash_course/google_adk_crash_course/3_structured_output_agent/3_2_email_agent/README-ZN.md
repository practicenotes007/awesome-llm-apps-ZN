# 📧 带结构化输出的邮件生成代理

一个演示如何使用Google的ADK（代理开发工具包）框架实现结构化输出的教程。此示例使用邮件生成代理来展示如何使用Pydantic模式和Gemini 2.5 Flash模型创建类型安全的结构化响应。

## 教程特点

- 📝 **结构化输出实现**：
  - 学习如何使用Pydantic模式实现类型安全的输出
  - 理解如何定义结构化响应格式
  - 查看Google ADK如何处理结构化响应

- 🎯 **邮件生成示例**：
  - 使用邮件生成作为用例的实际示例
  - 展示如何创建具有适当结构的专业邮件内容
  - 演示结构化输出的实际应用

- 🔧 **Google ADK最佳实践**：
  - 带有明确指令的简单代理定义
  - 正确使用输出模式以获得可靠结果
  - 展示核心概念的最小代码库

## 🚀 开始使用

1. **设置环境**：
   ```bash
   cd 3_2_email_agent
   
   # 复制环境模板
   cp env.example .env
   
   # 编辑.env并添加您的Google AI API密钥
   # 从以下网址获取API密钥：https://aistudio.google.com/
   ```

2. **安装依赖项**：
   ```bash
   # 导航回目录
   cd ..

   # 安装所需包
   pip install -r requirements.txt
   ```

3. **运行代理**
   ```bash
   # 启动ADK Web界面
   adk web
   ```
   然后：
   1. 在浏览器中打开Web界面
   2. 选择"email_generator_agent"
   3. 输入您的邮件请求（例如"写一封专业邮件安排与客户的会议"）
   4. 响应将是带有主题和正文字段的结构化JSON

## 教程概述

本教程演示了Google ADK中的结构化输出实现：

1. **代理定义**：学习如何使用Gemini 2.5 Flash创建`LlmAgent`
2. **输出模式**：理解如何使用Pydantic模型实现结构化响应
3. **指令**：查看如何为结构化输出编写清晰的提示
4. **结构化响应**：学习如何处理具有定义模式的JSON响应

## 代码结构

- `agent.py`：包含主要代理定义和Pydantic模式
- `__init__.py`：模块初始化以便轻松导入

## 依赖项

- `google-adk`：Google的代理开发工具包
- `pydantic`：数据验证和设置管理

## 结构化输出工作原理

本教程展示了Google ADK如何处理结构化输出：

1. **输入处理**：接收自然语言请求并通过代理处理
2. **内容生成**：使用Gemini 2.5 Flash根据指令生成内容
3. **输出结构化**：根据Pydantic模式自动格式化响应
4. **响应验证**：确保输出与定义的结构和类型匹配

这种方法演示了如何在Google ADK应用程序中创建可靠、类型安全的响应。